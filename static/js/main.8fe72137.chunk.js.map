{"version":3,"sources":["common.js","AppProvider.js","components/Header.js","components/Main.js","components/Footer.js","App.js","index.js"],"names":["GAME_TYPES","TWO_PLAYERS","VERSUS_COMPUTER","ICON_CHARS","PLAYER_TURNS","HUMAN","COMPUTER","getEmptyCells","cells","map","val","idx","filter","item","isMoveLeft","length","checkGameState","lines","i","_lines$i","Object","slicedToArray","a","b","c","position","concat","iconType","isTie","getRandom","start","end","Math","floor","random","replace","index","value","toConsumableArray","slice","findRandomMove","emptyCells","minimax","depth","computerType","isMax","score","_lines$i2","evaluate","best","lengthCells","nextCells","max","min","findBestMove","bestVal","bestMove","moveVal","THINKING_TIME","AppContext","React","createContext","AppProvider","initState","gameType","currentIcon","playerTurn","Array","fill","gameState","state","_this","changeType","type","initNewGame","humanPlay","newGame","initGame","timeout","clearTimeout","setTimeout","randomMove","computerPlay","arguments","undefined","setState","applyState","prevState","nextIcon","nextPlayerTurn","makeAIMove","this","react_default","createElement","Provider","props","children","Component","GameType","name","Consumer","context","onClick","className","Header","Header_GameType","contextType","Cell","icon","isDoneClass","Board","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","boardRef","createRef","_this2","current","classList","add","remove","ref","Main_Cell","Main","textInfo","currentIconType","Main_Board","Footer","href","target","rel","App","AppProvider_AppProvider","src_components_Header","src_components_Main","src_components_Footer","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.8fe72137.chunk.js","sourcesContent":["export const GAME_TYPES = {\r\n  TWO_PLAYERS: 0,\r\n  VERSUS_COMPUTER: 1\r\n}\r\n\r\nexport const ICON_TYPES = {\r\n  O: 0,\r\n  X: 1\r\n}\r\n\r\nexport const ICON_CHARS = ['O', 'X'];\r\n\r\nexport const PLAYER_TURNS = {\r\n  HUMAN: 0,\r\n  COMPUTER: 1\r\n}\r\n\r\nconst getEmptyCells = (cells) => {\r\n  return cells\r\n    .map((val, idx) => [val, idx])\r\n    .filter(item => item[0] === null);\r\n}\r\n\r\nconst isMoveLeft = (cells) => {\r\n  const emptyCells = getEmptyCells(cells);\r\n  return emptyCells.length > 0;\r\n}\r\n\r\nexport const checkGameState = (cells) => {\r\n  const lines = [\r\n    [0, 1, 2], // h.h0\r\n    [3, 4, 5], // h.h1 \r\n    [6, 7, 8], // h.h2\r\n    [0, 3, 6], // v.v0\r\n    [1, 4, 7], // v.v1\r\n    [2, 5, 8], // v.v2\r\n    [0, 4, 8], // d.d0\r\n    [2, 4, 6]  // d.d1\r\n  ];\r\n\r\n  let position = \"\";\r\n\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const [a, b, c] = lines[i];\r\n\r\n    if (cells[a] !== null && cells[a] === cells[b] && cells[a] === cells[c]) {\r\n      if (i >= 0 && i <= 2) position = `h h${i}`;\r\n      else if (i >= 3 && i <= 5) position = `v v${i - 3}`;\r\n      else position = `d${i - 6}`;\r\n\r\n      return {\r\n        position,\r\n        iconType: cells[a],\r\n        isTie: null\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    position: \"\",\r\n    iconType: null,\r\n    isTie: isMoveLeft(cells) ? null : true\r\n  };\r\n}\r\n\r\nexport const getRandom = (start, end) => {\r\n  return start + Math.floor(Math.random() * (end - start));\r\n}\r\n\r\nexport const replace = (cells, index, value) => {\r\n  return [...cells.slice(0, index), value, ...cells.slice(index + 1, cells.length)];\r\n}\r\n\r\n/**\r\n * Random move\r\n */\r\nexport const findRandomMove = (cells) => {\r\n  const emptyCells = getEmptyCells(cells);\r\n\r\n  if (emptyCells.length > 0) {\r\n    const randomNum = getRandom(0, emptyCells.length);\r\n    const index = emptyCells[randomNum][1];\r\n\r\n    return index;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Find best move based on Minimax algorithm\r\n */\r\nconst evaluate = (cells, computerType) => {\r\n  const lines = [\r\n    [0, 1, 2], // h.h0\r\n    [3, 4, 5], // h.h1 \r\n    [6, 7, 8], // h.h2\r\n    [0, 3, 6], // v.v0\r\n    [1, 4, 7], // v.v1\r\n    [2, 5, 8], // v.v2\r\n    [0, 4, 8], // d.d0\r\n    [2, 4, 6]  // d.d1\r\n  ];\r\n\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const [a, b, c] = lines[i];\r\n\r\n    if (cells[a] !== null && cells[a] === cells[b] && cells[a] === cells[c]) {\r\n      if (cells[a] === computerType) return 10;\r\n      return -10;\r\n    }\r\n  }\r\n\r\n  return 0;\r\n}\r\n\r\nconst minimax = (cells, depth, computerType, isMax) => {\r\n  const score = evaluate(cells, computerType);\r\n\r\n  // If Maximizer has won the game return his/her evaluated score \r\n  if (score === 10) return score - depth;\r\n\r\n  // If Minimizer has won the game return his/her evaluated score \r\n  if (score === -10) return score + depth;\r\n\r\n  // If there are no more moves and no winner then it is a tie \r\n  if (!isMoveLeft(cells)) return 0;\r\n\r\n  const lengthCells = cells.length;\r\n  let best;\r\n\r\n  // If this maximizer's move \r\n  if (isMax) {\r\n    best = -1000;\r\n\r\n    for (let i = 0; i < lengthCells; i++) {\r\n      const cell = cells[i];\r\n\r\n      if (cell === null) {\r\n        // Make a move\r\n        const nextCells = replace(cells, i, computerType);\r\n\r\n        // Call minimax recursively and choose the maximum value\r\n        best = Math.max(best, minimax(nextCells, depth + 1, computerType, !isMax));\r\n      }\r\n    }\r\n  } else {\r\n    best = 1000;\r\n\r\n    for (let i = 0; i < lengthCells; i++) {\r\n      const cell = cells[i];\r\n\r\n      if (cell === null) {\r\n        // Make a move\r\n        const nextCells = replace(cells, i, 1 - computerType);\r\n\r\n        // Call minimax recursively and choose the minimum value\r\n        best = Math.min(best, minimax(nextCells, depth + 1, computerType, !isMax));\r\n      }\r\n    }\r\n  }\r\n\r\n  return best;\r\n}\r\n\r\nexport const findBestMove = (cells, computerType) => {\r\n  let bestVal = -1000;\r\n  let bestMove = null;\r\n\r\n  const lengthCells = cells.length;\r\n\r\n  for (let i = 0; i < lengthCells; i++) {\r\n    const cell = cells[i];\r\n\r\n    if (cell === null) {\r\n      // Make a move\r\n      const nextCells = replace(cells, i, computerType);\r\n\r\n      // Compute evaluation function for this move. \r\n      const moveVal = minimax(nextCells, 0, computerType, false);\r\n\r\n      // If the value of the current move is more than the best value, then update best\r\n      if (moveVal > bestVal) {\r\n        bestVal = moveVal;\r\n        bestMove = i;\r\n      }\r\n    }\r\n  }\r\n\r\n  return bestMove;\r\n}","import React, { Component } from 'react';\r\nimport {\r\n  GAME_TYPES, PLAYER_TURNS,\r\n  checkGameState, getRandom, replace,\r\n  findBestMove, findRandomMove\r\n} from './common';\r\n\r\nconst THINKING_TIME = 500;\r\n\r\nexport const AppContext = React.createContext();\r\n\r\nexport default class AppProvider extends Component {\r\n  initState = {\r\n    gameType: GAME_TYPES.TWO_PLAYERS,\r\n    currentIcon: getRandom(0, 2),\r\n    playerTurn: getRandom(0, 2),\r\n    cells: new Array(9).fill(null),\r\n    gameState: {\r\n      position: \"\",\r\n      iconType: null,\r\n      isTie: null,\r\n    },\r\n  }\r\n\r\n  state = {\r\n    gameType: this.initState.gameType,\r\n    currentIcon: this.initState.currentIcon,\r\n    playerTurn: this.initState.playerTurn,\r\n    cells: this.initState.cells,\r\n    gameState: this.initState.gameState,\r\n\r\n    changeType: (type) => {\r\n      if (this.state.gameType !== type) {\r\n        this.initNewGame(type);\r\n      }\r\n    },\r\n    humanPlay: (index) => {\r\n      this.humanPlay(index)\r\n    },\r\n    newGame: () => {\r\n      this.initNewGame(this.state.gameType);\r\n    }\r\n  }\r\n\r\n  initGame = () => {\r\n    if (this.state.gameType === GAME_TYPES.VERSUS_COMPUTER &&\r\n      this.state.playerTurn === PLAYER_TURNS.COMPUTER) {\r\n\r\n      if (this.timeout) {\r\n        clearTimeout(this.timeout);\r\n      }\r\n\r\n      this.timeout = setTimeout(() => {\r\n        const randomMove = findRandomMove(this.state.cells);\r\n        this.computerPlay(randomMove);\r\n      }, THINKING_TIME);\r\n    }\r\n  }\r\n\r\n  initNewGame = (type = this.initState.gameType) => {\r\n    this.setState(() => {\r\n      return {\r\n        gameType: type,\r\n        currentIcon: getRandom(0, 2),\r\n        playerTurn: getRandom(0, 2),\r\n        cells: this.initState.cells,\r\n        gameState: this.initState.gameState,\r\n      }\r\n    }, () => {\r\n      this.initGame();\r\n    });\r\n  }\r\n\r\n  applyState = (prevState, index) => {\r\n    const cells = prevState.cells;\r\n    const nextIcon = 1 - prevState.currentIcon;\r\n    const nextPlayerTurn = 1 - prevState.playerTurn;\r\n    const nextCells = replace(cells, index, prevState.currentIcon);\r\n    const gameState = checkGameState(nextCells);\r\n\r\n    return {\r\n      gameState: gameState,\r\n      currentIcon: nextIcon,\r\n      playerTurn: nextPlayerTurn,\r\n      cells: nextCells\r\n    }\r\n  }\r\n\r\n  humanPlay = (index) => {\r\n    if (this.state.gameState.position === \"\" && this.state.cells[index] === null &&\r\n      (this.state.gameType === GAME_TYPES.TWO_PLAYERS || this.state.playerTurn === PLAYER_TURNS.HUMAN)) {\r\n\r\n      this.setState(prevState => {\r\n        return this.applyState(prevState, index);\r\n      }, () => {\r\n        // Make a move for computer if the game is in 'versus computer' mode\r\n        if (this.state.gameState.position === \"\" &&\r\n          this.state.gameType === GAME_TYPES.VERSUS_COMPUTER &&\r\n          this.state.playerTurn === PLAYER_TURNS.COMPUTER) {\r\n\r\n          setTimeout(() => {\r\n            this.makeAIMove();\r\n          }, THINKING_TIME);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  computerPlay = (index) => {\r\n    if (this.state.gameState.position === \"\" && this.state.cells[index] === null &&\r\n      this.state.gameType === GAME_TYPES.VERSUS_COMPUTER &&\r\n      this.state.playerTurn === PLAYER_TURNS.COMPUTER) {\r\n\r\n      this.setState(prevState => this.applyState(prevState, index));\r\n    }\r\n  }\r\n\r\n  makeAIMove = () => {\r\n    const bestMove = findBestMove(this.state.cells, this.state.currentIcon);\r\n\r\n    if (bestMove !== null) {\r\n      this.computerPlay(bestMove);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initGame();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <AppContext.Provider value={this.state}>\r\n        {this.props.children}\r\n      </AppContext.Provider>\r\n    );\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport { AppContext } from '../AppProvider';\r\nimport { GAME_TYPES } from '../common';\r\n\r\nimport './Header.css';\r\n\r\nconst GameType = (props) => {\r\n    const { value, name } = props;\r\n\r\n    return (\r\n      <AppContext.Consumer>\r\n        {context => (\r\n          <li \r\n            onClick={() => context.changeType(value)} \r\n            className={value === context.gameType ? \"active\" : \"\"}> \r\n            {name} \r\n          </li>\r\n        )}\r\n      </AppContext.Consumer>\r\n    )\r\n  }\r\n\r\nclass Header extends Component {\r\n  render() {\r\n    return (\r\n      <header className=\"header\">\r\n        <h1>Tic Tac Toe</h1>\r\n        <ul>\r\n          <GameType value={GAME_TYPES.TWO_PLAYERS} name=\"2 Players\" />\r\n          <GameType value={GAME_TYPES.VERSUS_COMPUTER} name=\"Versus Computer\" />\r\n        </ul>\r\n        <div>\r\n          <button onClick={() => this.context.newGame()}>New Game</button>\r\n        </div>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nHeader.contextType = AppContext;\r\n\r\nexport default Header;\r\n","import React, { Component } from 'react';\r\nimport { AppContext } from '../AppProvider';\r\nimport { GAME_TYPES, PLAYER_TURNS, ICON_CHARS } from '../common';\r\nimport './Main.css';\r\n\r\nconst ICON_PLACE_HOLDDER = 'I';\r\n\r\nconst Cell = (props) => {\r\n  return (\r\n    <AppContext.Consumer>\r\n      {context => {\r\n        const value = context.cells[props.index];\r\n        const icon = value !== null ? ICON_CHARS[value] : ICON_PLACE_HOLDDER;\r\n        const isDoneClass = icon !== ICON_PLACE_HOLDDER ? 'done' : '';\r\n\r\n        return (\r\n          <button\r\n            className={`cell cell-${props.index} ${isDoneClass}`}\r\n            onClick={() => context.humanPlay(props.index)}>\r\n            {icon}\r\n          </button>\r\n        )\r\n      }}\r\n    </AppContext.Consumer>\r\n  )\r\n}\r\n\r\nclass Board extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.boardRef = React.createRef();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.context.gameState.position !== \"\") {\r\n      setTimeout(() => {\r\n        this.boardRef.current.classList.add('full');\r\n      }, 50);\r\n    } else {\r\n      this.boardRef.current.classList.remove('full');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={`board ${this.context.gameState.position}`} ref={this.boardRef}>\r\n        <div className=\"board-row\">\r\n          <Cell index={0} />\r\n          <Cell index={1} />\r\n          <Cell index={2} />\r\n        </div>\r\n\r\n        <div className=\"board-row\">\r\n          <Cell index={3} />\r\n          <Cell index={4} />\r\n          <Cell index={5} />\r\n        </div>\r\n\r\n        <div className=\"board-row\">\r\n          <Cell index={6} />\r\n          <Cell index={7} />\r\n          <Cell index={8} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nBoard.contextType = AppContext;\r\n\r\nclass Main extends Component {\r\n  render() {\r\n    let textInfo = '';\r\n    const currentIconType = this.context.currentIcon;\r\n\r\n    if (this.context.gameState.isTie) {\r\n      textInfo = 'Tie!';\r\n    } else {\r\n      if (this.context.gameType === GAME_TYPES.TWO_PLAYERS) {\r\n        if (this.context.gameState.position === \"\") {\r\n          textInfo = `It's player(${ICON_CHARS[currentIconType]}) turn`;\r\n        } else {\r\n          textInfo = `Player(${ICON_CHARS[1 - currentIconType]}) wins!`;\r\n        }\r\n      } else {\r\n        if (this.context.gameState.position === \"\") {\r\n          if (this.context.playerTurn === PLAYER_TURNS.HUMAN) textInfo = `It's your turn`;\r\n          else textInfo = `It's computer turn`;\r\n        } else {\r\n          if (this.context.playerTurn === PLAYER_TURNS.HUMAN) textInfo = `Computer win!`;\r\n          else textInfo = `You win!`;\r\n        }\r\n      }\r\n    }\r\n\r\n    return (\r\n      <main className=\"main\">\r\n        <div className=\"info\">{textInfo}</div>\r\n        <Board />\r\n      </main>\r\n    );\r\n  }\r\n}\r\nMain.contextType = AppContext;\r\n\r\nexport default Main;\r\n","import React, { Component } from 'react';\r\nimport './Footer.css';\r\n\r\nclass Footer extends Component {\r\n  render() {\r\n    return (\r\n      <footer className=\"footer\">\r\n        <a href=\"https://about.phamvanlam.com\" target=\"_blank\" rel=\"noreferrer noopener\">\r\n          Home\r\n        </a>\r\n        {\" \"}\r\n        <a href=\"https://github.com/completejavascript/tic-tac-toe\" target=\"_blank\" rel=\"noreferrer noopener\">\r\n          Github\r\n        </a>\r\n      </footer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Footer;\r\n","import React, { Component } from 'react';\r\nimport AppProvider from './AppProvider';\r\nimport Header from './components/Header';\r\nimport Main from './components/Main';\r\nimport Footer from './components/Footer';\r\n\r\nimport './App.css';\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <AppProvider>\r\n        <div className=\"app\">\r\n          <Header />\r\n          <Main />\r\n          <Footer />\r\n        </div>\r\n      </AppProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}